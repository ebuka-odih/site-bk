import{u as z,r as d,j as e,H as J,L as I}from"./app-DsaYr9ov.js";import{A as K}from"./AdminLayout-B54kbsd4.js";import{B as o,C as j,a as y,b as v,c as N,d as k}from"./card-DjYOWe5w.js";import{A as V}from"./arrow-left-DxCFJoe2.js";import{P as G}from"./plus-BQehTUMd.js";/* empty css            */import"./createLucideIcon-Jc8OllCn.js";function te({paymentMethod:r,types:W}){const C=z({type:r.type,name:r.name,key:r.key,enabled:r.enabled,min_amount:r.min_amount,max_amount:r.max_amount||"",processing_time:r.processing_time||"",fee_percentage:r.fee_percentage||"",fee_fixed:r.fee_fixed||"",requires_reference:r.requires_reference,sort_order:r.sort_order,configuration:{},instructions:{},notes:[]}),{data:c,setData:i,processing:_,errors:l}=C,[u,m]=d.useState([]),[x,p]=d.useState([]),[g,b]=d.useState([]),[f,h]=d.useState([]),w=d.useRef(!1),A=()=>{const s={};if(c.type==="crypto"){const t={};f.forEach(a=>{a.currency&&a.address&&(t[a.currency]={name:a.name,address:a.address,network:a.network})}),Object.keys(t).length>0&&(s.currencies=t)}return u.forEach(t=>{if(t.key&&t.value)try{t.value.startsWith("{")||t.value.startsWith("[")?s[t.key]=JSON.parse(t.value):s[t.key]=t.value}catch{s[t.key]=t.value}}),s},E=()=>{const s={};return x.forEach(t=>{t.key&&t.value&&(s[t.key]=t.value)}),s},B=()=>g.filter(s=>s.trim()!==""),S=(s,t={})=>{C.transform(a=>({...a,...s})),C.put(`/admin/payment-methods/${r.id}`,{preserveScroll:!0,...t,onFinish:()=>{C.transform(a=>a),t?.onFinish&&t.onFinish()}})};d.useEffect(()=>{w.current=!1},[r.id]),d.useEffect(()=>{if(r.type==="crypto"&&r.configuration?.currencies){const s=r.configuration.currencies,t=Object.entries(s).map(([a,n])=>({currency:a,name:n.name||"",address:n.address||"",network:n.network||""}));h(t.length>0?t:[{currency:"BTC",name:"Bitcoin (BTC)",address:"",network:"Bitcoin"}]),w.current=!0}else r.type==="crypto"&&!w.current&&(h([{currency:"BTC",name:"Bitcoin (BTC)",address:"",network:"Bitcoin"},{currency:"ETH",name:"Ethereum (ETH)",address:"",network:"Ethereum (ERC-20)"}]),w.current=!0);if(r.configuration){const s=Object.entries(r.configuration).filter(([t])=>t!=="currencies").map(([t,a])=>({key:t,value:typeof a=="object"?JSON.stringify(a):String(a)}));m(s.length>0?s:[{key:"",value:""}])}else m([{key:"",value:""}]);if(r.instructions){const s=Object.entries(r.instructions).map(([t,a])=>({key:t,value:a}));p(s.length>0?s:[{key:"",value:""}])}else p([{key:"",value:""}]);r.notes&&r.notes.length>0?b(r.notes):b([""])},[r]);const P=s=>{s.preventDefault(),S({configuration:A(),instructions:E(),notes:B()})},R=s=>{const t=f[s];if(!t.currency||!t.address){alert("Please fill in Currency Code and Wallet Address");return}S({configuration:A(),instructions:E(),notes:B()},{onSuccess:()=>{alert(`${t.currency} saved successfully!`)}})},q=()=>{m([...u,{key:"",value:""}])},O=s=>{m(u.filter((t,a)=>a!==s))},L=()=>{p([...x,{key:"",value:""}])},U=s=>{p(x.filter((t,a)=>a!==s))},H=()=>{b([...g,""])},D=s=>{b(g.filter((t,a)=>a!==s))},T=()=>{h([...f,{currency:"",name:"",address:"",network:""}])},$=s=>{h(f.filter((t,a)=>a!==s))},F=(s,t,a)=>{const n=[...f];n[s][t]=a,h(n)};return e.jsxs(K,{children:[e.jsx(J,{title:`Edit ${r.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(I,{href:"/admin/payment-methods",children:e.jsxs(o,{variant:"ghost",className:"text-slate-400 hover:text-slate-50",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Back"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-50",children:"Edit Payment Method"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Update the payment method configuration"})]})]}),e.jsxs("form",{onSubmit:P,children:[e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(y,{children:[e.jsx(v,{className:"text-slate-50",children:"Basic Information"}),e.jsx(N,{className:"text-slate-400",children:"Update the basic details for this payment method"})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Type ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("select",{value:c.type,onChange:s=>i("type",s.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",children:Object.entries(W).map(([s,t])=>e.jsx("option",{value:s,children:t},s))}),l.type&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.type})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:c.name,onChange:s=>i("name",s.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"e.g., Bank Transfer"}),l.name&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Key (Unique Identifier) ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:c.key,onChange:s=>i("key",s.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"e.g., bank_transfer"}),e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Use lowercase with underscores, e.g., bank_transfer"}),l.key&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.key})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Min Amount (cents) ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"number",value:c.min_amount,onChange:s=>i("min_amount",parseInt(s.target.value)),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"1000"}),e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"1000 = $10.00"}),l.min_amount&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.min_amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Max Amount (cents)"}),e.jsx("input",{type:"number",value:c.max_amount,onChange:s=>i("max_amount",s.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Leave empty for no limit"}),l.max_amount&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.max_amount})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Processing Time"}),e.jsx("input",{type:"text",value:c.processing_time,onChange:s=>i("processing_time",s.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"e.g., 1-3 business days"}),l.processing_time&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.processing_time})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Fee Percentage (%)"}),e.jsx("input",{type:"number",step:"0.01",value:c.fee_percentage,onChange:s=>i("fee_percentage",s.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"e.g., 2.9"}),l.fee_percentage&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.fee_percentage})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Fixed Fee (cents)"}),e.jsx("input",{type:"number",value:c.fee_fixed,onChange:s=>i("fee_fixed",s.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"e.g., 2500 for $25"}),l.fee_fixed&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.fee_fixed})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.enabled,onChange:s=>i("enabled",s.target.checked),className:"rounded bg-slate-800 border-slate-700 text-amber-600 focus:ring-amber-500"}),e.jsx("span",{className:"text-sm text-slate-300",children:"Enabled"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.requires_reference,onChange:s=>i("requires_reference",s.target.checked),className:"rounded bg-slate-800 border-slate-700 text-amber-600 focus:ring-amber-500"}),e.jsx("span",{className:"text-sm text-slate-300",children:"Requires Payment Reference"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",value:c.sort_order,onChange:s=>i("sort_order",parseInt(s.target.value)),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"0"}),e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Lower numbers appear first"})]})]})]}),c.type==="crypto"&&e.jsxs(j,{className:"bg-slate-900 border-slate-800 mt-6",children:[e.jsxs(y,{children:[e.jsx(v,{className:"text-slate-50",children:"Cryptocurrency Wallets"}),e.jsx(N,{className:"text-slate-400",children:"Add wallet addresses for different cryptocurrencies"})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(o,{type:"button",onClick:T,className:"bg-green-600 hover:bg-green-700 text-white flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Add Currency"]})}),f.map((s,t)=>e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg space-y-3 border border-slate-700",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Currency Code"}),e.jsx("input",{type:"text",value:s.currency,onChange:a=>F(t,"currency",a.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"e.g., BTC, ETH, USDT"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Display Name"}),e.jsx("input",{type:"text",value:s.name,onChange:a=>F(t,"name",a.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"e.g., Bitcoin (BTC)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Wallet Address"}),e.jsx("input",{type:"text",value:s.address,onChange:a=>F(t,"address",a.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"e.g., bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Network"}),e.jsx("input",{type:"text",value:s.network,onChange:a=>F(t,"network",a.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"e.g., Bitcoin, Ethereum (ERC-20)"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-slate-700",children:[e.jsx(o,{type:"button",onClick:()=>R(t),disabled:_,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:_?"Saving...":"Save Currency"}),e.jsx(o,{type:"button",variant:"ghost",onClick:()=>$(t),className:"text-red-400 hover:text-red-300",children:"Remove"})]})]},t)),e.jsx(o,{type:"button",variant:"outline",onClick:T,children:"Add Currency"})]})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800 mt-6",children:[e.jsxs(y,{children:[e.jsx(v,{className:"text-slate-50",children:c.type==="crypto"?"Additional Configuration":"Configuration"}),e.jsx(N,{className:"text-slate-400",children:c.type==="crypto"?"Add any additional configuration (optional)":"Add configuration details (e.g., account numbers, API keys)"})]}),e.jsxs(k,{className:"space-y-4",children:[u.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s.key,onChange:a=>{const n=[...u];n[t].key=a.target.value,m(n)},className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Key (e.g., api_key)"}),e.jsx("input",{type:"text",value:s.value,onChange:a=>{const n=[...u];n[t].value=a.target.value,m(n)},className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Value"}),e.jsx(o,{type:"button",variant:"ghost",onClick:()=>O(t),className:"text-red-400 hover:text-red-300",children:"Remove"})]},t)),e.jsx(o,{type:"button",variant:"outline",onClick:q,children:"Add Field"})]})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800 mt-6",children:[e.jsxs(y,{children:[e.jsx(v,{className:"text-slate-50",children:"Instructions"}),e.jsx(N,{className:"text-slate-400",children:"Payment instructions shown to users"})]}),e.jsxs(k,{className:"space-y-4",children:[x.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s.key,onChange:a=>{const n=[...x];n[t].key=a.target.value,p(n)},className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Label (e.g., Account Number)"}),e.jsx("input",{type:"text",value:s.value,onChange:a=>{const n=[...x];n[t].value=a.target.value,p(n)},className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Value"}),e.jsx(o,{type:"button",variant:"ghost",onClick:()=>U(t),className:"text-red-400 hover:text-red-300",children:"Remove"})]},t)),e.jsx(o,{type:"button",variant:"outline",onClick:L,children:"Add Instruction"})]})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800 mt-6",children:[e.jsxs(y,{children:[e.jsx(v,{className:"text-slate-50",children:"Notes"}),e.jsx(N,{className:"text-slate-400",children:"Important notes or disclaimers for users"})]}),e.jsxs(k,{className:"space-y-4",children:[g.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:a=>{const n=[...g];n[t]=a.target.value,b(n)},className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-50 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Note text"}),e.jsx(o,{type:"button",variant:"ghost",onClick:()=>D(t),className:"text-red-400 hover:text-red-300",children:"Remove"})]},t)),e.jsx(o,{type:"button",variant:"outline",onClick:H,children:"Add Note"})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx(o,{type:"submit",disabled:_,className:"bg-amber-600 hover:bg-amber-700 text-white",children:_?"Updating...":"Update Payment Method"}),e.jsx(I,{href:"/admin/payment-methods",children:e.jsx(o,{type:"button",variant:"outline",children:"Cancel"})})]})]})]})]})}export{te as default};
