import{r as c,j as e,u as R,H as U,a as N}from"./app-B1MdF2DY.js";import{A as z,X as F}from"./AdminLayout-3UnpDEvq.js";import{e as M,C as _,a as g,b as j,c as b,d as f,B as d}from"./card-CwcHH9b6.js";import{T as I}from"./trash-2-BOVW9M9E.js";import{c as A}from"./createLucideIcon-DWZw76-H.js";import{D as E}from"./download-DvD2dC7L.js";import{I as B}from"./info-B9st7K1N.js";/* empty css            *//**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],T=A("database",O),n=c.forwardRef(({className:t,type:u="text",...m},r)=>e.jsx("input",{type:u,className:M("flex h-11 w-full rounded-lg border border-slate-700/80 bg-slate-950/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...m}));n.displayName="Input";function Q({settings:t}){const u=c.useMemo(()=>({site_name:t.site.name??"",site_email:t.site.email??"",support_email:t.site.support_email??"",app_url:t.site.url??"",timezone:t.site.timezone??"",currency:t.site.currency??"",site_logo:null,remove_logo:!1,security_max_login_attempts:t.security.max_login_attempts?.toString()??"",security_lockout_time:t.security.lockout_time?.toString()??"",security_session_timeout:t.security.session_timeout?.toString()??"",security_two_factor_threshold:t.security.two_factor_threshold?.toString()??"",security_admin_approval_threshold:t.security.admin_approval_threshold?.toString()??""}),[t]),m=R(u),{data:r,setData:a,errors:i,processing:y}=m;c.useEffect(()=>{a(()=>({...u}))},[u,a]);const[p,x]=c.useState(t.branding.logo_url??null),[o,h]=c.useState(null);c.useEffect(()=>{r.site_logo||x(t.branding.logo_url??null)},[t.branding.logo_url,r.site_logo]),c.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]);const w=()=>{confirm("Clear application cache?")&&N.post("/admin/settings/clear-cache")},k=()=>{confirm("Run database migrations? This may affect the database.")&&N.post("/admin/settings/run-migrations")},C=l=>{const s=l.target.files?.[0]??null;if(o&&(URL.revokeObjectURL(o),h(null)),a("site_logo",s),a("remove_logo",!1),s){const v=URL.createObjectURL(s);x(v),h(v)}else x(t.branding.logo_url??null)},S=()=>{o&&(URL.revokeObjectURL(o),h(null)),a("site_logo",null),a("remove_logo",!0),x(null)},L=l=>{l.preventDefault(),m.transform(s=>({...s,site_name:s.site_name.trim()===""?null:s.site_name.trim(),site_email:s.site_email.trim()===""?null:s.site_email.trim(),support_email:s.support_email.trim()===""?null:s.support_email.trim(),app_url:s.app_url.trim()===""?null:s.app_url.trim(),timezone:s.timezone.trim()===""?null:s.timezone.trim(),currency:s.currency.trim()===""?null:s.currency.trim(),security_max_login_attempts:s.security_max_login_attempts.trim()===""?null:s.security_max_login_attempts.trim(),security_lockout_time:s.security_lockout_time.trim()===""?null:s.security_lockout_time.trim(),security_session_timeout:s.security_session_timeout.trim()===""?null:s.security_session_timeout.trim(),security_two_factor_threshold:s.security_two_factor_threshold.trim()===""?null:s.security_two_factor_threshold.trim(),security_admin_approval_threshold:s.security_admin_approval_threshold.trim()===""?null:s.security_admin_approval_threshold.trim()})),m.put("/admin/settings",{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{a("site_logo",null),a("remove_logo",!1),r.site_logo||x(t.branding.logo_url??null)},onFinish:()=>{m.transform(s=>s)}})};return e.jsxs(z,{children:[e.jsx(U,{title:"Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-50",children:"Settings"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage application configuration, branding, and security."})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs(_,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(g,{children:[e.jsx(j,{className:"text-slate-50",children:"Site Information"}),e.jsx(b,{className:"text-slate-400",children:"Update the public-facing details for your banking portal."})]}),e.jsx(f,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"site_name",className:"block text-sm font-medium text-slate-300",children:"Site Name"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx(n,{id:"site_name",value:r.site_name,onChange:l=>a("site_name",l.target.value),placeholder:"Banko"}),i.site_name&&e.jsx("p",{className:"text-sm text-red-400",children:i.site_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"site_email",className:"block text-sm font-medium text-slate-300",children:"Primary Email"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx(n,{id:"site_email",type:"email",value:r.site_email,onChange:l=>a("site_email",l.target.value),placeholder:"support@banko.test"}),i.site_email&&e.jsx("p",{className:"text-sm text-red-400",children:i.site_email})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"support_email",className:"block text-sm font-medium text-slate-300",children:"Support Email"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx(n,{id:"support_email",type:"email",value:r.support_email,onChange:l=>a("support_email",l.target.value),placeholder:"help@banko.test"}),i.support_email&&e.jsx("p",{className:"text-sm text-red-400",children:i.support_email})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"app_url",className:"block text-sm font-medium text-slate-300",children:"Application URL"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx(n,{id:"app_url",type:"url",value:r.app_url,onChange:l=>a("app_url",l.target.value),placeholder:"https://banko.test"}),i.app_url&&e.jsx("p",{className:"text-sm text-red-400",children:i.app_url})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-slate-300",children:"Timezone"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx(n,{id:"timezone",value:r.timezone,onChange:l=>a("timezone",l.target.value),placeholder:"UTC"}),i.timezone&&e.jsx("p",{className:"text-sm text-red-400",children:i.timezone})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-slate-300",children:"Currency"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx(n,{id:"currency",value:r.currency,onChange:l=>a("currency",l.target.value.toUpperCase()),placeholder:"NGN",className:"uppercase"}),i.currency&&e.jsx("p",{className:"text-sm text-red-400",children:i.currency})]})]})]})})]}),e.jsxs(_,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(g,{children:[e.jsx(j,{className:"text-slate-50",children:"Branding"}),e.jsx(b,{className:"text-slate-400",children:"Upload or replace the logo displayed across the platform."})]}),e.jsx(f,{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-6 space-y-4 md:space-y-0",children:[e.jsx("div",{className:"h-24 w-24 rounded-lg border border-slate-700 bg-slate-950 flex items-center justify-center overflow-hidden",children:p?e.jsx("img",{src:p,alt:"Site logo preview",className:"h-full w-full object-cover"}):e.jsx("span",{className:"text-xs text-slate-500 text-center px-2",children:"No logo uploaded"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"site_logo",className:"block text-sm font-medium text-slate-300",children:"Upload Logo"}),e.jsx("input",{id:"site_logo",type:"file",accept:"image/*",onChange:C,className:"mt-2 block w-full text-sm text-slate-300 file:mr-4 file:rounded-md file:border-0 file:bg-emerald-500 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-emerald-900 hover:file:bg-emerald-400"}),i.site_logo&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:i.site_logo}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Accepted formats: PNG, JPG, SVG. Max size 2MB."})]}),(p||t.branding.logo_url)&&e.jsxs(d,{type:"button",variant:"outline",onClick:S,className:"bg-slate-950 border-slate-700 text-slate-200 hover:bg-slate-800 hover:text-slate-50",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Remove Logo"]})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(d,{type:"submit",disabled:y,className:"bg-emerald-600 hover:bg-emerald-500 text-slate-950 font-semibold",children:y?"Saving...":"Save Changes"})})]}),e.jsxs(_,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(g,{children:[e.jsx(j,{className:"text-slate-50",children:"System Maintenance"}),e.jsx(b,{className:"text-slate-400",children:"Database and cache management tools for administrators."})]}),e.jsxs(f,{className:"space-y-3",children:[e.jsxs(d,{onClick:w,variant:"outline",className:"w-full justify-start bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-50",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Clear Application Cache"]}),e.jsxs(d,{onClick:k,variant:"outline",className:"w-full justify-start bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-50",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Run Database Migrations"]}),e.jsx("a",{href:"/admin/settings/backup-database",children:e.jsxs(d,{variant:"outline",className:"w-full justify-start bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-50",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Download Database Backup"]})}),e.jsx("a",{href:"/admin/settings/system-info",children:e.jsxs(d,{variant:"outline",className:"w-full justify-start bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-50",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"View System Information"]})})]})]})]})]})}export{Q as default};
