import{r as m,u as S,j as e,H as F,a as y}from"./app-Bgen3D_e.js";import{A as U,X as R}from"./AdminLayout-CvAb4kMJ.js";import{C as d,a as n,b as u,c as x,d as h,B as i,e as z}from"./card-nWzjw9-G.js";import{T as A}from"./trash-2-BUVOHDA9.js";import{c as D}from"./createLucideIcon-tGLIE-cM.js";import{D as q}from"./download-CWRerTpb.js";import{I as M}from"./info-kXt4Vna5.js";/* empty css            *//**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],B=D("database",T);function X({settings:a}){const N=m.useMemo(()=>({site_name:a.site.name??"",site_email:a.site.email??"",support_email:a.site.support_email??"",app_url:a.site.url??"",timezone:a.site.timezone??"",currency:a.site.currency??"",site_logo:null,remove_logo:!1,security_max_login_attempts:Number(a.security.max_login_attempts??5),security_lockout_time:Number(a.security.lockout_time??30),security_session_timeout:Number(a.security.session_timeout??30),security_two_factor_threshold:Number(a.security.two_factor_threshold??1e5),security_admin_approval_threshold:Number(a.security.admin_approval_threshold??1e6)}),[a]),f=S(N),{data:r,setData:l,errors:s,processing:g}=f,[p,c]=m.useState(a.branding.logo_url??null),[o,b]=m.useState(null);m.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]);const v=()=>{confirm("Clear application cache?")&&y.post("/admin/settings/clear-cache")},k=()=>{confirm("Run database migrations? This may affect the database.")&&y.post("/admin/settings/run-migrations")},w=t=>{const _=t.target.files?.[0]??null;if(o&&(URL.revokeObjectURL(o),b(null)),l("site_logo",_),l("remove_logo",!1),_){const j=URL.createObjectURL(_);c(j),b(j)}else c(a.branding.logo_url??null)},C=()=>{o&&(URL.revokeObjectURL(o),b(null)),l("site_logo",null),l("remove_logo",!0),c(null)},L=t=>{t.preventDefault(),f.put("/admin/settings",{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{l("site_logo",null),l("remove_logo",!1),r.site_logo||c(a.branding.logo_url??null)}})};return e.jsxs(U,{children:[e.jsx(F,{title:"Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-50",children:"Settings"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage application configuration, branding, and security."})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs(d,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(n,{children:[e.jsx(u,{className:"text-slate-50",children:"Site Information"}),e.jsx(x,{className:"text-slate-400",children:"Update the public-facing details for your banking portal."})]}),e.jsx(h,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"site_name",className:"block text-sm font-medium text-slate-300",children:"Site Name"}),e.jsx("input",{id:"site_name",type:"text",value:r.site_name,onChange:t=>l("site_name",t.target.value),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 placeholder-slate-500 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"Banko",required:!0}),s.site_name&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.site_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"site_email",className:"block text-sm font-medium text-slate-300",children:"Primary Email"}),e.jsx("input",{id:"site_email",type:"email",value:r.site_email,onChange:t=>l("site_email",t.target.value),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 placeholder-slate-500 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"support@banko.test",required:!0}),s.site_email&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.site_email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"support_email",className:"block text-sm font-medium text-slate-300",children:"Support Email"}),e.jsx("input",{id:"support_email",type:"email",value:r.support_email??"",onChange:t=>l("support_email",t.target.value),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 placeholder-slate-500 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"help@banko.test"}),s.support_email&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.support_email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"app_url",className:"block text-sm font-medium text-slate-300",children:"Application URL"}),e.jsx("input",{id:"app_url",type:"url",value:r.app_url,onChange:t=>l("app_url",t.target.value),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 placeholder-slate-500 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"https://banko.test",required:!0}),s.app_url&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.app_url})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-slate-300",children:"Timezone"}),e.jsx("input",{id:"timezone",type:"text",value:r.timezone,onChange:t=>l("timezone",t.target.value),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 placeholder-slate-500 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"UTC",required:!0}),s.timezone&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.timezone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-slate-300",children:"Currency"}),e.jsx("input",{id:"currency",type:"text",value:r.currency,onChange:t=>l("currency",t.target.value.toUpperCase()),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 placeholder-slate-500 focus:border-emerald-500 focus:ring-emerald-500 uppercase",placeholder:"NGN",required:!0}),s.currency&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.currency})]})]})})]}),e.jsxs(d,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(n,{children:[e.jsx(u,{className:"text-slate-50",children:"Branding"}),e.jsx(x,{className:"text-slate-400",children:"Upload or replace the logo displayed across the platform."})]}),e.jsx(h,{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-6 space-y-4 md:space-y-0",children:[e.jsx("div",{className:"h-24 w-24 rounded-lg border border-slate-700 bg-slate-950 flex items-center justify-center overflow-hidden",children:p?e.jsx("img",{src:p,alt:"Site logo preview",className:"h-full w-full object-cover"}):e.jsx("span",{className:"text-xs text-slate-500 text-center px-2",children:"No logo uploaded"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"site_logo",className:"block text-sm font-medium text-slate-300",children:"Upload Logo"}),e.jsx("input",{id:"site_logo",type:"file",accept:"image/*",onChange:w,className:"mt-2 block w-full text-sm text-slate-300 file:mr-4 file:rounded-md file:border-0 file:bg-emerald-500 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-emerald-900 hover:file:bg-emerald-400"}),s.site_logo&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.site_logo}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Accepted formats: PNG, JPG, SVG. Max size 2MB."})]}),(p||a.branding.logo_url)&&e.jsxs(i,{type:"button",variant:"outline",onClick:C,className:"bg-slate-950 border-slate-700 text-slate-200 hover:bg-slate-800 hover:text-slate-50",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Remove Logo"]})]})]})})]}),e.jsxs(d,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(n,{children:[e.jsx(u,{className:"text-slate-50",children:"Security Controls"}),e.jsx(x,{className:"text-slate-400",children:"Configure access policies and transaction safeguards."})]}),e.jsx(h,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"security_max_login_attempts",className:"block text-sm font-medium text-slate-300",children:"Max Login Attempts"}),e.jsx("input",{id:"security_max_login_attempts",type:"number",min:1,max:20,value:r.security_max_login_attempts,onChange:t=>l("security_max_login_attempts",Number(t.target.value)),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 focus:border-emerald-500 focus:ring-emerald-500",required:!0}),s.security_max_login_attempts&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.security_max_login_attempts})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"security_lockout_time",className:"block text-sm font-medium text-slate-300",children:"Lockout Time (minutes)"}),e.jsx("input",{id:"security_lockout_time",type:"number",min:1,max:1440,value:r.security_lockout_time,onChange:t=>l("security_lockout_time",Number(t.target.value)),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 focus:border-emerald-500 focus:ring-emerald-500",required:!0}),s.security_lockout_time&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.security_lockout_time})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"security_session_timeout",className:"block text-sm font-medium text-slate-300",children:"Session Timeout (minutes)"}),e.jsx("input",{id:"security_session_timeout",type:"number",min:1,max:1440,value:r.security_session_timeout,onChange:t=>l("security_session_timeout",Number(t.target.value)),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 focus:border-emerald-500 focus:ring-emerald-500",required:!0}),s.security_session_timeout&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.security_session_timeout})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"security_two_factor_threshold",className:"block text-sm font-medium text-slate-300",children:"2FA Threshold (minor currency units)"}),e.jsx("input",{id:"security_two_factor_threshold",type:"number",min:0,value:r.security_two_factor_threshold,onChange:t=>l("security_two_factor_threshold",Number(t.target.value)),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 focus:border-emerald-500 focus:ring-emerald-500",required:!0}),s.security_two_factor_threshold&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.security_two_factor_threshold})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"security_admin_approval_threshold",className:"block text-sm font-medium text-slate-300",children:"Admin Approval Threshold (minor currency units)"}),e.jsx("input",{id:"security_admin_approval_threshold",type:"number",min:0,value:r.security_admin_approval_threshold,onChange:t=>l("security_admin_approval_threshold",Number(t.target.value)),className:"mt-2 block w-full rounded-md border border-slate-700 bg-slate-950 text-slate-50 focus:border-emerald-500 focus:ring-emerald-500",required:!0}),s.security_admin_approval_threshold&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:s.security_admin_approval_threshold})]})]})}),e.jsx(z,{className:"flex justify-end",children:e.jsx(i,{type:"submit",disabled:g,className:"bg-emerald-600 hover:bg-emerald-500 text-slate-950 font-semibold",children:g?"Saving...":"Save Changes"})})]})]}),e.jsxs(d,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(n,{children:[e.jsx(u,{className:"text-slate-50",children:"System Maintenance"}),e.jsx(x,{className:"text-slate-400",children:"Database and cache management tools for administrators."})]}),e.jsxs(h,{className:"space-y-3",children:[e.jsxs(i,{onClick:v,variant:"outline",className:"w-full justify-start bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-50",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Clear Application Cache"]}),e.jsxs(i,{onClick:k,variant:"outline",className:"w-full justify-start bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-50",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Run Database Migrations"]}),e.jsx("a",{href:"/admin/settings/backup-database",children:e.jsxs(i,{variant:"outline",className:"w-full justify-start bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-50",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Download Database Backup"]})}),e.jsx("a",{href:"/admin/settings/system-info",children:e.jsxs(i,{variant:"outline",className:"w-full justify-start bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-50",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"View System Information"]})})]})]})]})]})}export{X as default};
