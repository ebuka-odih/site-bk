import{r as a,u as A,j as e,H as I,L as q}from"./app-DTiM-GE2.js";import{C as $,a as W,b as U,c as z,d as V,B as L}from"./card-D9LfDUC9.js";import{c as F}from"./createLucideIcon-CFa8QLqb.js";import{M as T}from"./mail-EKmxCLpo.js";import{S as G}from"./shield-DtbB9zn6.js";import{L as J}from"./lock-CEVXoSgf.js";import{A as K}from"./arrow-left-vlSg1BMa.js";/* empty css            *//**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],X=F("banknote",Q);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Z=F("refresh-cw",Y);function ie({status:w,flash:c}){const[x,v]=a.useState("email"),[N,p]=a.useState(""),[h,y]=a.useState(""),[n,f]=a.useState(0),[m,b]=a.useState(!1),[_,d]=a.useState(null),[M,P]=a.useState(!1),k=a.useRef(Date.now()),{data:s,setData:r,post:g,processing:u,errors:l,reset:R}=A({email:"",otp_code:"",password:"",remember:!1,internal_code:"",page_loaded_at:"",interaction_token:"pending"}),S=l.form_security;a.useEffect(()=>{c?.user_name&&p(c.user_name)},[c]),a.useEffect(()=>{if(n>0){const t=setTimeout(()=>{f(n-1)},1e3);return()=>clearTimeout(t)}},[n]),a.useEffect(()=>{const t=Date.now();k.current=t,r("page_loaded_at",Math.floor(t/1e3).toString()),r("internal_code",""),r("interaction_token","pending");const i=()=>{P(!0),d(null),r("interaction_token","human")},j=["mousemove","mousedown","keydown","touchstart","pointerdown","scroll"];return j.forEach(o=>{window.addEventListener(o,i,{once:!0})}),()=>{j.forEach(o=>{window.removeEventListener(o,i)})}},[r]);const C=()=>{const i=Date.now()-k.current;return s.internal_code.trim()!==""?(d("Security challenge failed. Please refresh the page and try again."),!0):!M||s.interaction_token!=="human"?(d("Please interact with the page (move your mouse or tap) before continuing."),!0):i<3e3?(d("Please take a moment before continuing."),!0):(d(null),!1)},E={internal_code:s.internal_code,page_loaded_at:s.page_loaded_at,interaction_token:s.interaction_token},D=t=>{t.preventDefault(),!C()&&g("/login/send-otp",{preserveScroll:!0,onSuccess:i=>{const o=i.props.flash?.user_name||"";p(o),y(s.email),o&&sessionStorage.setItem("login_user_name",o),sessionStorage.setItem("login_user_email",s.email),v("otp-password")},onError:()=>{}})},B=t=>{t.preventDefault(),!C()&&g("/login/verify-otp",{data:{...s,email:h,...E}})},H=()=>{v("email"),p(""),y(""),f(0),R("otp_code","password")},O=()=>{n>0||m||(b(!0),g("/login/resend-otp",{data:{email:h,...E},preserveScroll:!0,onSuccess:()=>{f(60),b(!1)},onError:()=>{b(!1)}}))};return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Log in"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center overflow-auto",style:{backgroundColor:"#020617"},children:e.jsx("div",{className:"w-full py-12 px-4 sm:px-6 lg:px-8 flex items-center justify-center min-h-full",children:e.jsxs($,{className:"w-full max-w-md bg-slate-900 border-slate-800",children:[e.jsxs(W,{className:"space-y-3 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full border border-blue-500/40 bg-blue-500/10",children:e.jsx(X,{className:"h-6 w-6 text-blue-400"})}),e.jsx("span",{className:"text-lg font-semibold tracking-[0.35em] text-slate-300 uppercase",children:"Banko"})]}),e.jsx(U,{className:"text-2xl font-bold text-center text-slate-50",children:x==="email"?"Welcome back":`Hello${N?" "+N:""}`}),e.jsx(z,{className:"text-center text-slate-400",children:x==="email"?"Enter your email to continue":"Enter your OTP code and password"})]}),e.jsxs(V,{children:[w&&e.jsx("div",{className:"mb-4 rounded-md bg-emerald-900/50 border border-emerald-700 p-3",children:e.jsx("p",{className:"text-sm text-emerald-200",children:w})}),(_||S)&&e.jsx("div",{className:"mb-4 rounded-md border border-red-500/60 bg-red-500/10 p-3 text-sm text-red-200",children:_??S}),x==="email"?e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{"aria-hidden":"true",style:{position:"absolute",left:"-10000px",top:"auto",width:"1px",height:"1px",overflow:"hidden"},children:[e.jsx("label",{htmlFor:"internal_code",children:"Internal code"}),e.jsx("input",{id:"internal_code",name:"internal_code",type:"text",tabIndex:-1,autoComplete:"off",value:s.internal_code,onChange:t=>r("internal_code",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-300 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx("input",{id:"email",type:"email",value:s.email,onChange:t=>r("email",t.target.value),className:"w-full pl-10 rounded-md bg-slate-800 border border-slate-700 text-slate-50 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-600 focus:border-transparent placeholder:text-slate-500",placeholder:"Enter your email address",autoComplete:"email",autoFocus:!0,required:!0})]}),l.email&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:l.email})]}),e.jsx(L,{type:"submit",disabled:u,className:"w-full bg-slate-700 hover:bg-slate-600 text-slate-50",children:u?"Sending OTP...":"Continue"})]}):e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsx("input",{type:"hidden",name:"internal_code",value:s.internal_code}),e.jsx("div",{className:"mb-4 p-3 bg-slate-800/50 rounded-md border border-slate-700",children:e.jsxs("p",{className:"text-sm text-slate-300",children:[e.jsx(T,{className:"inline h-4 w-4 mr-2"}),"OTP sent to ",e.jsx("span",{className:"font-medium text-slate-200",children:h})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp_code",className:"block text-sm font-medium text-slate-300 mb-1",children:"Verification Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx("input",{id:"otp_code",type:"text",value:s.otp_code,onChange:t=>r("otp_code",t.target.value),className:"w-full pl-10 rounded-md bg-slate-800 border border-slate-700 text-slate-50 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-600 focus:border-transparent placeholder:text-slate-500",placeholder:"Enter 6-digit code",maxLength:6,autoComplete:"one-time-code",autoFocus:!0,required:!0})]}),l.otp_code&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:l.otp_code}),c?.success&&e.jsx("p",{className:"mt-1 text-sm text-emerald-400",children:c.success}),e.jsx("div",{className:"mt-2",children:e.jsxs("button",{type:"button",onClick:O,disabled:n>0||m,className:"text-sm text-slate-400 hover:text-slate-200 inline-flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:text-slate-400",children:[e.jsx(Z,{className:`h-3 w-3 mr-1 ${m?"animate-spin":""}`}),n>0?`Resend OTP in ${n}s`:m?"Sending...":"Resend OTP"]})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-300 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx("input",{id:"password",type:"password",value:s.password,onChange:t=>r("password",t.target.value),className:"w-full pl-10 rounded-md bg-slate-800 border border-slate-700 text-slate-50 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-600 focus:border-transparent",placeholder:"Enter your password",autoComplete:"current-password",required:!0})]}),l.password&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:l.password})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.remember,onChange:t=>r("remember",t.target.checked),className:"h-4 w-4 rounded border-slate-700 bg-slate-800 text-slate-400 focus:ring-slate-600"}),e.jsx("span",{className:"ml-2 text-sm text-slate-400",children:"Remember me"})]})}),e.jsx(L,{type:"submit",disabled:u,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow-lg",children:u?"Accessing...":"Access Login"}),e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("button",{type:"button",onClick:H,className:"text-sm text-slate-400 hover:text-slate-200 inline-flex items-center",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Back to email"]})})]}),e.jsxs("div",{className:"mt-6 text-center text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Don't have an account? "}),e.jsx(q,{href:"/register",className:"font-medium text-slate-300 hover:text-slate-50",children:"Sign up"})]})]})]})})})]})}export{ie as default};
